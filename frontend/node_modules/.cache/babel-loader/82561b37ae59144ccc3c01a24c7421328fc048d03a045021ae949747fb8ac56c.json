{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from 'vuex';\nimport prestatairesService from \"@/services/prestataires.service\";\nexport default {\n  name: \"PrestataireDetail\",\n  data() {\n    return {\n      prestataire: null,\n      user_note: 0,\n      user_comment: \"\"\n    };\n  },\n  methods: {\n    ...mapActions('prestataire', ['getPrestataireAvis', 'getAllPrestataires']),\n    getUtilisateur(id) {\n      return this.utilisateurs.find(u => u['id_utilisateur'] === id);\n    },\n    // Envoie les données entrée dans le formulaire de commentaire sous forme d'événement\n    sendCommentForm() {\n      let data = [this.prestataire['id'], this.user_note, this.user_comment, this.utilisateur.id];\n      console.log(data);\n      // Appeler la méthode pour insérer un commentaire ici -- à faire lorsque la connexion des utilisateurs sera implémentée.\n      prestatairesService.sendAvisOfUser(data);\n      this.getPrestataireAvis(this.prestataire['id']);\n    },\n    makeDonation() {\n      const id = this.$route.params.id;\n      this.$router.push('/dons/' + id);\n    },\n    refreshPage() {\n      window.location.reload();\n    }\n  },\n  computed: {\n    ...mapState('utilisateurs', ['utilisateur', 'utilisateurs']),\n    ...mapState('prestataire', [\"avis_prestataire\", \"prestataires\"])\n  },\n  async created() {\n    await this.getAllPrestataires();\n    const id = this.$route.params.id;\n    this.prestataire = this.prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale\n    this.getPrestataireAvis(this.prestataire['id']); // récupère les avis du prestataire\n  },\n  mounted: function () {\n    window.location.reload();\n  }\n};","map":{"version":3,"names":["mapActions","mapState","prestatairesService","name","data","prestataire","user_note","user_comment","methods","getUtilisateur","id","utilisateurs","find","u","sendCommentForm","utilisateur","console","log","sendAvisOfUser","getPrestataireAvis","makeDonation","$route","params","$router","push","refreshPage","window","location","reload","computed","created","getAllPrestataires","prestataires","p","mounted"],"sources":["src/views/PagePrestataire.vue"],"sourcesContent":["<template>\n  <div class=\"prestataire-detail\" v-if=\"prestataire\">\n    <div class=\"image-container\">\n      <img class=\"animate-fade\" :src=\"require(`@/assets/${prestataire.image}`)\" alt=\"Logo du Prestataire\">\n    </div>\n    <div class=\"info-container animate-slide\">\n      <h1>{{ prestataire.nom }}</h1>\n      <p>{{ prestataire.description }}</p>\n      <ul>\n        <li><strong>Catégorie:</strong> {{ prestataire.categorie }}</li>\n        <li><strong>Emplacement:</strong> {{ prestataire.id_emplacement }}</li>\n      </ul>\n      <div class=\"dons\">\n        <p class=\"total-dons-presta\">total</p>\n        <button @click=\"makeDonation()\" class=\"make-donation\">Faire un don</button>\n      </div>\n      <div class=\"avis\">\n        <h2>Avis et commentaires</h2>\n        <div v-if=\"utilisateur.estConnecte\" class=\"avis-input\">\n          <h3>Envoyer un avis:</h3>\n            <div class=\"rating\">\n              <input type=\"radio\" name=\"rating\" id=\"rating-5\" v-model=\"user_note\" value=5>\n              <label for=\"rating-5\"></label>\n\n              <input type=\"radio\" name=\"rating\" id=\"rating-4\" v-model=\"user_note\" value=4>\n              <label for=\"rating-4\"></label>\n\n              <input type=\"radio\" name=\"rating\" id=\"rating-3\" v-model=\"user_note\" value=3>\n              <label for=\"rating-3\"></label>\n\n              <input type=\"radio\" name=\"rating\" id=\"rating-2\" v-model=\"user_note\" value=2 >\n              <label for=\"rating-2\"></label>\n\n              <input type=\"radio\" name=\"rating\" id=\"rating-1\" v-model=\"user_note\" value=1 >\n              <label for=\"rating-1\"></label>\n            </div><br>\n            <label for=\"commentaire_input\">Commentaire: </label>\n            <input id=\"commentaire_input\" type=\"text\" v-model=\"user_comment\">\n            <button @click=\"sendCommentForm()\">Envoyer</button>\n        </div>\n        <div v-else>Soyez connecté(e) pour poster un avis</div><br>\n        <h3>Avis des utilisateurs</h3>\n        <div v-for=\"avis in this.avis_prestataire\" :key=\"avis['id']\">\n          <h4>{{ getUtilisateur(avis['id_utilisateur'])['nom_utilisateur'] }} - {{ avis['note'] }}/5</h4>\n          <p>{{ avis['texte'] }}</p>\n        </div>\n    </div>\n    </div>\n  </div>\n  <div v-else>\n    <p @load=\"refreshPage()\">Chargement des données...</p>\n  </div>\n</template>\n\n<script>\nimport {mapActions, mapState} from 'vuex';\nimport prestatairesService from \"@/services/prestataires.service\";\n\n\nexport default {\n  name: \"PrestataireDetail\",\n  data() {\n    return {\n      prestataire: null,\n      user_note: 0,\n      user_comment: \"\",\n    };\n  },\n  methods:{\n    ...mapActions('prestataire', ['getPrestataireAvis', 'getAllPrestataires']),\n    getUtilisateur(id){\n      return this.utilisateurs.find(u => u['id_utilisateur'] === id);\n    },\n    // Envoie les données entrée dans le formulaire de commentaire sous forme d'événement\n    sendCommentForm(){\n      let data = [this.prestataire['id'],this.user_note, this.user_comment, this.utilisateur.id];\n      console.log(data);\n      // Appeler la méthode pour insérer un commentaire ici -- à faire lorsque la connexion des utilisateurs sera implémentée.\n      prestatairesService.sendAvisOfUser(data);\n      this.getPrestataireAvis(this.prestataire['id']);\n    },\n    makeDonation(){\n      const id = this.$route.params.id;\n      this.$router.push('/dons/'+id)\n    },\n    refreshPage(){\n      window.location.reload();\n    }\n  },\n  computed: {\n    ...mapState('utilisateurs', ['utilisateur', 'utilisateurs']),\n    ...mapState('prestataire', [\"avis_prestataire\", \"prestataires\"])\n  },\n  async created() {\n    await this.getAllPrestataires();\n    const id = this.$route.params.id;\n    this.prestataire = this.prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale\n    this.getPrestataireAvis(this.prestataire['id']) // récupère les avis du prestataire\n  },\n  mounted: function () {\n      window.location.reload();\n  }\n};\n</script>\n\n<style scoped>\n.prestataire-detail {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  padding: 16px;\n}\n\n.image-container {\n  flex: 1;\n  padding: 10px;\n}\n\n.image-container img {\n  max-width: 75%;\n  /* Réduire la taille de l'image */\n  height: auto;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  transition: opacity 0.5s ease-in-out;\n  /* Animation */\n}\n\n.info-container {\n  flex: 2;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  animation: slideIn 0.5s forwards;\n  /* Animation */\n}\n\nh1 {\n  color: #333;\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\nul {\n  list-style: none;\n  padding: 0;\n}\n\nul li {\n  margin-bottom: 5px;\n  color: #666;\n}\n\nul li strong {\n  color: #333;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n.animate-fade {\n  animation: fadeIn 1s ease-in-out;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(-20px);\n    opacity: 0;\n  }\n\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n.animate-slide {\n  animation: slideIn 1s ease-in-out;\n}\n\n\n.rating {\n  display: flex;\n  width: 100%;\n  justify-content: left;\n  overflow: hidden;\n  flex-direction: row-reverse;\n  position: relative;\n}\n\n.rating > input {\n  display: none;\n}\n\n.rating > label {\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  margin-top: auto;\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23e3e3e3' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 76%;\n  transition: .3s;\n}\n\n.rating > input:checked ~ label,\n.rating > input:checked ~ label ~ label {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23fcd93a' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e\");\n}\n\n\n.rating > input:not(:checked) ~ label:hover,\n.rating > input:not(:checked) ~ label:hover ~ label {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23d8b11e' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e\");\n}\n\n\n\n</style>"],"mappings":";AAuDA,SAAAA,UAAA,EAAAC,QAAA;AACA,OAAAC,mBAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACA,GAAAR,UAAA;IACAS,eAAAC,EAAA;MACA,YAAAC,YAAA,CAAAC,IAAA,CAAAC,CAAA,IAAAA,CAAA,uBAAAH,EAAA;IACA;IACA;IACAI,gBAAA;MACA,IAAAV,IAAA,SAAAC,WAAA,aAAAC,SAAA,OAAAC,YAAA,OAAAQ,WAAA,CAAAL,EAAA;MACAM,OAAA,CAAAC,GAAA,CAAAb,IAAA;MACA;MACAF,mBAAA,CAAAgB,cAAA,CAAAd,IAAA;MACA,KAAAe,kBAAA,MAAAd,WAAA;IACA;IACAe,aAAA;MACA,MAAAV,EAAA,QAAAW,MAAA,CAAAC,MAAA,CAAAZ,EAAA;MACA,KAAAa,OAAA,CAAAC,IAAA,YAAAd,EAAA;IACA;IACAe,YAAA;MACAC,MAAA,CAAAC,QAAA,CAAAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,GAAA5B,QAAA;IACA,GAAAA,QAAA;EACA;EACA,MAAA6B,QAAA;IACA,WAAAC,kBAAA;IACA,MAAArB,EAAA,QAAAW,MAAA,CAAAC,MAAA,CAAAZ,EAAA;IACA,KAAAL,WAAA,QAAA2B,YAAA,CAAApB,IAAA,CAAAqB,CAAA,IAAAA,CAAA,CAAAvB,EAAA,KAAAA,EAAA;IACA,KAAAS,kBAAA,MAAAd,WAAA;EACA;EACA6B,OAAA,WAAAA,CAAA;IACAR,MAAA,CAAAC,QAAA,CAAAC,MAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}