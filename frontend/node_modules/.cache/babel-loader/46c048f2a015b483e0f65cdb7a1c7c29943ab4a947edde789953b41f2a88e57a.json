{"ast":null,"code":"import { mapActions, mapState } from 'vuex';\nimport moneyService from '@/services/money.service';\nexport default {\n  name: \"PageDon\",\n  data() {\n    return {\n      prestataire: null,\n      premadeAmount: [\"5\", \"10\", \"20\"],\n      userInput: \"0\",\n      montantDon: \"5\",\n      isDonValide: true,\n      message: \"\"\n    };\n  },\n  methods: {\n    ...mapActions('prestataire', ['getAllPrestataires']),\n    ...mapActions('utilisateurs', ['getAllUsers']),\n    getUtilisateur(id) {\n      return this.utilisateurs.find(u => u['id_utilisateur'] === id);\n    },\n    checkIsMontantValide() {\n      if (this.montantDon > 0) this.isDonValide = true;else this.isDonValide = false;\n    },\n    updateMontantDon() {\n      if (parseInt(this.userInput) && this.userInput > 0) {\n        this.montantDon = this.userInput;\n        this.isDonValide = true;\n      } else {\n        this.isDonValide = false;\n      }\n    },\n    async makeDonation() {\n      let response;\n      try {\n        response = await moneyService.makeDonation(this.utilisateur.id, this.prestataire.id, parseInt(this.montantDon), this.message);\n      } catch (e) {\n        response = e;\n      }\n      return response;\n    }\n  },\n  computed: {\n    ...mapState('utilisateurs', ['utilisateur', 'utilisateurs']),\n    ...mapState('prestataire', [\"avis_prestataire\", \"prestataires\"])\n  },\n  async created() {\n    await this.getAllPrestataires();\n    await this.getAllUsers();\n    const id = this.$route.params.id;\n    this.prestataire = this.prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale    \n  }\n};","map":{"version":3,"names":["mapActions","mapState","moneyService","name","data","prestataire","premadeAmount","userInput","montantDon","isDonValide","message","methods","getUtilisateur","id","utilisateurs","find","u","checkIsMontantValide","updateMontantDon","parseInt","makeDonation","response","utilisateur","e","computed","created","getAllPrestataires","getAllUsers","$route","params","prestataires","p"],"sources":["src/views/PageDon.vue"],"sourcesContent":["<template>\n    <div class=\"prestataire-detail\" v-if=\"prestataire\">\n        <h1>Faire un don à {{ prestataire.nom }}</h1>\n        <div>\n            <input @change=\"checkIsMontantValide()\" id=\"montant5\" type=\"radio\" value=\"5\" v-model=\"montantDon\">\n            <label for=\"montant5\">5€ </label>\n            <input @change=\"checkIsMontantValide()\" id=\"montant10\" type=\"radio\" value=\"10\" v-model=\"montantDon\">\n            <label for=\"montant10\">10€ </label>\n            <input @change=\"checkIsMontantValide()\" id=\"montant20\" type=\"radio\" value=\"20\" v-model=\"montantDon\">\n            <label for=\"montant20\">20€ </label>\n            <input @change=\"checkIsMontantValide()\" id=\"montant0\" type=\"radio\" value=\"0\" v-model=\"montantDon\">\n            <label for=\"montant0\">Choisir un montant personnalisé </label><br>\n            <div v-if=\"!premadeAmount.includes(montantDon)\">\n                <label for=\"personnalise\">Entrer un montant personnalisé: </label>\n                <input id=\"personnalise\" type=\"text\" @change=\"updateMontantDon()\" v-model=\"userInput\">\n            </div>\n            <div v-if=\"isDonValide\">\n                <p>Montant choisi: {{ montantDon }} €</p><br>\n                <input type=\"text\" style=\"overflow-y: scroll;\" placeholder=\"Message optionnel\" v-model=\"message\">\n                <button>Faire un don de {{ montantDon }} €</button>\n            </div>\n            <div v-else>\n                <p style=\"color: red;\">Veuillez entrer un montant valide</p>\n            </div>\n        </div>\n    </div>\n    <div v-else>\n        <p>Chargement des données...</p>\n    </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex';\nimport moneyService from '@/services/money.service';\n\nexport default {\n    name: \"PageDon\",\n    data() {\n        return {\n            prestataire: null,\n            premadeAmount: [\"5\", \"10\", \"20\"],\n            userInput: \"0\",\n            montantDon: \"5\",\n            isDonValide: true,\n            message: \"\",\n        };\n    },\n    methods: {\n        ...mapActions('prestataire', ['getAllPrestataires']),\n        ...mapActions('utilisateurs', ['getAllUsers']),\n        getUtilisateur(id) {\n            return this.utilisateurs.find(u => u['id_utilisateur'] === id);\n        },\n        checkIsMontantValide(){\n            if(this.montantDon > 0) this.isDonValide = true;\n            else this.isDonValide = false;\n        },\n        updateMontantDon() {\n            if (parseInt(this.userInput) && this.userInput > 0) {\n                this.montantDon = this.userInput;\n                this.isDonValide = true;\n            }else{\n                this.isDonValide = false;\n            }\n        },\n        async makeDonation(){\n            let response;\n            try{\n                response = await moneyService.makeDonation(this.utilisateur.id, this.prestataire.id, parseInt(this.montantDon), this.message);\n\n            }catch(e){\n                response = e;\n            }\n            return response\n        }\n    },\n    computed: {\n        ...mapState('utilisateurs', ['utilisateur', 'utilisateurs']),\n        ...mapState('prestataire', [\"avis_prestataire\", \"prestataires\"])\n    },\n    async created() {\n        await this.getAllPrestataires();\n        await this.getAllUsers();\n        const id = this.$route.params.id;\n        this.prestataire = this.prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale    \n    },\n};\n</script>\n\n<style scoped></style>"],"mappings":"AAgCA,SAAAA,UAAA,EAAAC,QAAA;AACA,OAAAC,YAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,aAAA;MACAC,SAAA;MACAC,UAAA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,GAAAX,UAAA;IACA,GAAAA,UAAA;IACAY,eAAAC,EAAA;MACA,YAAAC,YAAA,CAAAC,IAAA,CAAAC,CAAA,IAAAA,CAAA,uBAAAH,EAAA;IACA;IACAI,qBAAA;MACA,SAAAT,UAAA,WAAAC,WAAA,aACA,KAAAA,WAAA;IACA;IACAS,iBAAA;MACA,IAAAC,QAAA,MAAAZ,SAAA,UAAAA,SAAA;QACA,KAAAC,UAAA,QAAAD,SAAA;QACA,KAAAE,WAAA;MACA;QACA,KAAAA,WAAA;MACA;IACA;IACA,MAAAW,aAAA;MACA,IAAAC,QAAA;MACA;QACAA,QAAA,SAAAnB,YAAA,CAAAkB,YAAA,MAAAE,WAAA,CAAAT,EAAA,OAAAR,WAAA,CAAAQ,EAAA,EAAAM,QAAA,MAAAX,UAAA,QAAAE,OAAA;MAEA,SAAAa,CAAA;QACAF,QAAA,GAAAE,CAAA;MACA;MACA,OAAAF,QAAA;IACA;EACA;EACAG,QAAA;IACA,GAAAvB,QAAA;IACA,GAAAA,QAAA;EACA;EACA,MAAAwB,QAAA;IACA,WAAAC,kBAAA;IACA,WAAAC,WAAA;IACA,MAAAd,EAAA,QAAAe,MAAA,CAAAC,MAAA,CAAAhB,EAAA;IACA,KAAAR,WAAA,QAAAyB,YAAA,CAAAf,IAAA,CAAAgB,CAAA,IAAAA,CAAA,CAAAlB,EAAA,KAAAA,EAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}