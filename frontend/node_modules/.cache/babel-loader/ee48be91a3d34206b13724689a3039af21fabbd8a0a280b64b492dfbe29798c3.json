{"ast":null,"code":"import { prestataires, utilisateurs } from '@/datasource/data';\nimport { mapActions, mapState } from 'vuex';\nimport prestatairesService from \"@/services/prestataires.service\";\nexport default {\n  name: \"PrestataireDetail\",\n  data() {\n    return {\n      prestataire: null,\n      user_note: 0,\n      user_comment: \"\"\n    };\n  },\n  methods: {\n    ...mapActions('prestataire', ['getPrestataireAvis']),\n    getUtilisateur(id) {\n      return utilisateurs.find(u => u['id_utilisateur'] === id);\n    },\n    // Envoie les données entrée dans le formulaire de commentaire sous forme d'événement\n    sendCommentForm() {\n      // Il faudra ajouter l'id de l'utilisateur courant lorsqu'il existera !\n      let data = [this.prestataire['id'], this.user_note, this.user_comment, this.utilisateur.id];\n      console.log(data);\n      // Appeler la méthode pour insérer un commentaire ici -- à faire lorsque la connexion des utilisateurs sera implémentée.\n      prestatairesService.sendAvisOfUser(data);\n      this.getPrestataireAvis(this.prestataire['id']);\n    }\n  },\n  computed: {\n    ...mapState('utilisateurs', ['utilisateur']),\n    ...mapState('prestataire', [\"avis_prestataire\"])\n  },\n  created() {\n    const id = this.$route.params.id;\n    this.prestataire = prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale\n    this.getPrestataireAvis(this.prestataire['id']); // récupère les avis du prestataire\n  }\n};","map":{"version":3,"names":["prestataires","utilisateurs","mapActions","mapState","prestatairesService","name","data","prestataire","user_note","user_comment","methods","getUtilisateur","id","find","u","sendCommentForm","utilisateur","console","log","sendAvisOfUser","getPrestataireAvis","computed","created","$route","params","p"],"sources":["src/views/PageDon.vue"],"sourcesContent":["<template>\n    <div class=\"prestataire-detail\" v-if=\"prestataire\">\n      <div class=\"image-container\">\n        <img class=\"animate-fade\" :src=\"require(`@/assets/${prestataire.image}`)\" alt=\"Logo du Prestataire\">\n      </div>\n      <div class=\"info-container animate-slide\">\n        <h1>{{ prestataire.nom }}</h1>\n        <p>{{ prestataire.description }}</p>\n        <ul>\n          <li><strong>Catégorie:</strong> {{ prestataire.categorie }}</li>\n          <li><strong>Emplacement:</strong> {{ prestataire.id_emplacement }}</li>\n        </ul>\n  \n        <div class=\"avis\">\n          <h2>Avis et commentaires</h2>\n          <div v-if=\"utilisateur.estConnecte\" class=\"avis-input\">\n            <h3>Envoyer un avis:</h3>\n              <div class=\"rating\">\n                <input type=\"radio\" name=\"rating\" id=\"rating-5\" v-model=\"user_note\" value=5>\n                <label for=\"rating-5\"></label>\n  \n                <input type=\"radio\" name=\"rating\" id=\"rating-4\" v-model=\"user_note\" value=4>\n                <label for=\"rating-4\"></label>\n  \n                <input type=\"radio\" name=\"rating\" id=\"rating-3\" v-model=\"user_note\" value=3>\n                <label for=\"rating-3\"></label>\n  \n                <input type=\"radio\" name=\"rating\" id=\"rating-2\" v-model=\"user_note\" value=2 >\n                <label for=\"rating-2\"></label>\n  \n                <input type=\"radio\" name=\"rating\" id=\"rating-1\" v-model=\"user_note\" value=1 >\n                <label for=\"rating-1\"></label>\n              </div><br>\n              <label for=\"commentaire_input\">Commentaire: </label>\n              <input id=\"commentaire_input\" type=\"text\" v-model=\"user_comment\">\n              <button @click=\"sendCommentForm()\">Envoyer</button>\n          </div>\n          <div v-else>Soyez connecté(e) pour poster un avis</div><br>\n          <h3>Avis des utilisateurs</h3>\n          <div v-for=\"avis in this.avis_prestataire\" :key=\"avis['id']\">\n            <h4>{{ getUtilisateur(avis['id_utilisateur'])['nom_utilisateur'] }} - {{ avis['note'] }}/5</h4>\n            <p>{{ avis['texte'] }}</p>\n          </div>\n      </div>\n      </div>\n    </div>\n    <div v-else>\n      <p>Chargement des données...</p>\n    </div>\n  </template>\n  \n  <script>\n  import {prestataires, utilisateurs} from '@/datasource/data';\n  import {mapActions, mapState} from 'vuex';\n  import prestatairesService from \"@/services/prestataires.service\";\n  \n  \n  export default {\n    name: \"PrestataireDetail\",\n    data() {\n      return {\n        prestataire: null,\n        user_note: 0,\n        user_comment: \"\",\n      };\n    },\n    methods:{\n  \n      ...mapActions('prestataire', ['getPrestataireAvis']),\n      getUtilisateur(id){\n        return utilisateurs.find(u => u['id_utilisateur'] === id);\n      },\n      // Envoie les données entrée dans le formulaire de commentaire sous forme d'événement\n      sendCommentForm(){\n        // Il faudra ajouter l'id de l'utilisateur courant lorsqu'il existera !\n        let data = [this.prestataire['id'],this.user_note, this.user_comment, this.utilisateur.id];\n        console.log(data);\n        // Appeler la méthode pour insérer un commentaire ici -- à faire lorsque la connexion des utilisateurs sera implémentée.\n        prestatairesService.sendAvisOfUser(data);\n        this.getPrestataireAvis(this.prestataire['id']);\n      }\n    },\n    computed: {\n      ...mapState('utilisateurs', ['utilisateur']),\n      ...mapState('prestataire', [\"avis_prestataire\"])\n    },\n    created() {\n      const id = this.$route.params.id;\n      this.prestataire = prestataires.find(p => p.id === id); // récupère le prestataire d'après l'id renseignée depuis la Page  principale\n      this.getPrestataireAvis(this.prestataire['id']) // récupère les avis du prestataire\n    },\n  };\n  </script>\n  \n  <style scoped>\n  </style>"],"mappings":"AAoDA,SAAAA,YAAA,EAAAC,YAAA;AACA,SAAAC,UAAA,EAAAC,QAAA;AACA,OAAAC,mBAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IAEA,GAAAR,UAAA;IACAS,eAAAC,EAAA;MACA,OAAAX,YAAA,CAAAY,IAAA,CAAAC,CAAA,IAAAA,CAAA,uBAAAF,EAAA;IACA;IACA;IACAG,gBAAA;MACA;MACA,IAAAT,IAAA,SAAAC,WAAA,aAAAC,SAAA,OAAAC,YAAA,OAAAO,WAAA,CAAAJ,EAAA;MACAK,OAAA,CAAAC,GAAA,CAAAZ,IAAA;MACA;MACAF,mBAAA,CAAAe,cAAA,CAAAb,IAAA;MACA,KAAAc,kBAAA,MAAAb,WAAA;IACA;EACA;EACAc,QAAA;IACA,GAAAlB,QAAA;IACA,GAAAA,QAAA;EACA;EACAmB,QAAA;IACA,MAAAV,EAAA,QAAAW,MAAA,CAAAC,MAAA,CAAAZ,EAAA;IACA,KAAAL,WAAA,GAAAP,YAAA,CAAAa,IAAA,CAAAY,CAAA,IAAAA,CAAA,CAAAb,EAAA,KAAAA,EAAA;IACA,KAAAQ,kBAAA,MAAAb,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}